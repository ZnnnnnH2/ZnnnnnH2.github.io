<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>php反序列化练习</title>
      <link href="/2025/08/01/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%83%E4%B9%A0/"/>
      <url>/2025/08/01/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%83%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>如何把其他文件输出 highlight_file(‘flag.php’);</p><p>最简单的反序列化</p><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>最简单的反序列化</p><h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>urlencode</p><p>在收到请求时，PHP 内部会 <strong>自动对 Cookie 做一次百分号解码（percent-decode）</strong>，再把结果填进 <code>$_COOKIE</code> 超全局，所以脚本里看到的已经是“还原好”的字符串。</p><p>PHP 对 <code>$_GET</code> &#x2F; <code>$_POST</code> 也会先做同样的解码（只是 <code>+</code> 在 query string 会变空格）；保持行为一致更易理解。</p><h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><ol><li><p><code>creat_function()</code>: <code>create_function(string $args, string $code): string</code>. 它内部会 <code>eval(&quot;function ($args) &#123; $code &#125;&quot;)</code> —— <strong>在创建时就执行 <code>eval</code></strong>。</p><ol><li>将<code>$code</code>的首字符设为<code>&#125;</code>，这是经典的 <strong><code>create_function</code> 注入技巧</strong>：<ul><li><code>create_function(&#39;&#39;, &#39;…代码…&#39;)</code> 会拼成：<code>function () &#123; …代码… &#125;</code></li><li>你把 <code>code</code> 设为 <code>&quot;&#125;...;//&quot;</code>，<strong>先闭合</strong>函数体，然后插入任意 PHP 语句，最后用注释吞掉尾巴。</li></ul></li></ol></li><li><p>PHP 7+ 允许对“数组型 callable（<code>[$obj,&#39;method&#39;]</code>）”直接用 <code>()</code> 调用。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Hello, <span class="subst">$name</span>\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$d</span>   = <span class="keyword">new</span> <span class="title class_">Demo</span>();</span><br><span class="line"><span class="variable">$cb</span>  = [<span class="variable">$d</span>, <span class="string">&#x27;hi&#x27;</span>];       <span class="comment">// 数组型 callable</span></span><br><span class="line"><span class="variable">$arg</span> = <span class="string">&#x27;Peter&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1) 传统</span></span><br><span class="line"><span class="title function_ invoke__">call_user_func</span>(<span class="variable">$cb</span>, <span class="variable">$arg</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2) PHP 7+ 直接调用</span></span><br><span class="line"><span class="variable">$cb</span>(<span class="variable">$arg</span>);               <span class="comment">// 也可写 ($cb)($arg);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3) 本质等同于</span></span><br><span class="line"><span class="variable">$d</span>-&gt;<span class="title function_ invoke__">hi</span>(<span class="variable">$arg</span>);            <span class="comment">// 直接方法调用</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2><ol><li>序列格式化过滤绕过：<ol><li>在<code>preg_match(&#39;/[oc]:\d+:/i&#39;,$cmd</code>中，在数字前面加上<code>+</code>，<code>O:+6:&quot;secret&quot;:2:&#123;s:4:&quot;file&quot;;s:8:&quot;flag.php&quot;;&#125;</code>.</li><li>在 PHP 的序列化语法 里，所有用数字表示长度或数量的字段其实都被当成 “C-风格整数” 来解析——也就是说，前面出现一个 + 或 - 号，unserialize() 仍会把它正确地转换成整数值。“+” 不会改变实际长度校验。</li></ol></li><li>CVE-2016-7124 漏洞：<ol><li>PHP 5.6.0 – 5.6.24 和 7.0.0 – 7.0.9 在执行 unserialize() 时，如果反序列化过程 途中失败（典型场景：属性数量与真实不符、循环引用解析出错等），就会提早返回而 不再调用 **wakeup()——但此时对象已经被创建进内存并最终会被析构，从而触发 **destruct()。依赖 __wakeup() 做安全检查、权限校验、属性清理的应用会被绕过，导致 任意魔术方法调用、远程代码执行或拒绝服务。</li></ol></li></ol><h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2><ol><li><code>private</code>属性：<ol><li>特别的， 当一个变量为私有变量时， 序列化之后会在变量名的头部添加\00 类名\00， 由于\00 不可见， 显示在页面上就是类名+变量名， 但是该名称的长度依然计算两个\00， 所以在实际场景中，需要注意长度和名称是否匹配。</li><li>如果变量为 protected， 会在变量名的头部添加\00*\00。</li></ol></li></ol><h2 id="7"><a href="#7" class="headerlink" title="7"></a>7</h2><ol><li><code>__call($func, $args)</code> 魔术方法：<ol><li>当调用一个不可访问的对象方法时，PHP 会自动调用 <code>__call()</code> 方法。</li><li><code>__call()</code> 接受两个参数：方法名和参数数组。</li><li>例如：<code>$obj-&gt;method($arg1, $arg2)</code> 会触发 <code>$obj-&gt;__call(&#39;method&#39;, [$arg1, $arg2])</code></li></ol></li></ol><h2 id="8"><a href="#8" class="headerlink" title="8"></a>8</h2><ol><li>反序列化逃逸</li></ol>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 反序列化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pandas 基础</title>
      <link href="/2025/07/26/pandas/"/>
      <url>/2025/07/26/pandas/</url>
      
        <content type="html"><![CDATA[<h1 id="pandas-2-Pandas-I-from-Spring-2025-–-Principles-and-Techniques-of-Data-Science"><a href="#pandas-2-Pandas-I-from-Spring-2025-–-Principles-and-Techniques-of-Data-Science" class="headerlink" title="pandas [[2  Pandas I (from Spring 2025) – Principles and Techniques of Data Science]]"></a>pandas [[2  Pandas I (from Spring 2025) – Principles and Techniques of Data Science]]</h1><h2 id="how-datas-are-organized"><a href="#how-datas-are-organized" class="headerlink" title="how datas are organized"></a>how datas are organized</h2><p>see table as DataFrame, and each column as a Series</p><h3 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h3><ul><li>a sequence of values of same type</li><li>a sequence of data labels called index</li></ul><h4 id="Selection-in-Series"><a href="#Selection-in-Series" class="headerlink" title="Selection in Series"></a>Selection in Series</h4><ul><li>by a single label or a list of labels: <code>s[[labels]]</code></li><li>by a filtering condition: <code>s[s &gt; 0]</code></li></ul><h3 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h3><h4 id="where-the-data-of-DataFrame-comes-from"><a href="#where-the-data-of-DataFrame-comes-from" class="headerlink" title="where the data of DataFrame comes from"></a>where the data of DataFrame comes from</h4><ul><li>csv file: <code>pd.read_csv(&#39;file.csv&#39;, index_col = &#39;year&#39;)</code></li><li>using a list: <code>pd.DataFrame([[1, 2], [3, 4]], columns=[&#39;A&#39;, &#39;B&#39;], index=[&#39;a&#39;, &#39;b&#39;])</code></li><li>using a dictionary: <code>pd.DataFrame(&#123;&#39;A&#39;: [1, 2], &#39;B&#39;: [3, 4]&#125;, index=[&#39;a&#39;, &#39;b&#39;])</code></li><li>using a Series:</li></ul><h4 id="about-index"><a href="#about-index" class="headerlink" title="about index"></a>about index</h4><ul><li>index can also have a name</li><li>do not have to be unique</li><li>These indices are the arbitrary numerical indices generated when we created the <code>DataFrame</code>. For example, <code>banana</code> was originally in row 2, and so it has row label 2. Note the distinction between the index <code>_label_</code>, and the actual index <code>_position_</code>.</li><li>can be set to specific column using <code>df.set_index(&lt;column&gt;)</code></li><li>can be reset to default using <code>df.reset_index()</code></li></ul><h4 id="DataFrame-API"><a href="#DataFrame-API" class="headerlink" title="DataFrame API"></a>DataFrame API</h4><p><a href="**%5Bhttps://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html%5D(https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html)**">API doc</a></p><ul><li><code>idxmax()</code> function returns the index of the first occurrence of the maximum value in a Series or DataFrame.</li><li><code>drop_duplicates()</code> function removes duplicate rows from a DataFrame.</li></ul><h4 id="Data-extraction"><a href="#Data-extraction" class="headerlink" title="Data extraction"></a>Data extraction</h4><ul><li><code>df.head(&lt;n&gt;)</code></li><li><code>df.tail(&lt;n&gt;)</code></li><li><code>df.loc[&lt;row_index&gt;, &lt;column_name&gt;]</code><ul><li>Note that if we request a single column but don’t enclose it in a list, the return type of the <code>loc</code> operator is a <code>Series</code> rather than a <code>DataFrame</code></li><li><strong>reminder: a:b means [a,b]</strong></li></ul></li><li><code>df.iloc[&lt;row_integers&gt;, &lt;column_integers&gt;]</code></li><li><code>[]</code><ul><li>a slice of rows: <code>df[&lt;row_slice&gt;]</code></li><li>a list of column labels</li><li>a single column label</li><li><strong>reminder: a:b means [a,b)</strong></li><li>Note that slicing notation is not supported for columns if you use <code>[]</code> notation. Use <code>loc</code> instead.</li></ul></li></ul><h5 id="Boolean-Array-Input"><a href="#Boolean-Array-Input" class="headerlink" title="Boolean Array Input"></a>Boolean Array Input</h5><ul><li><code>.loc</code> and <code>[]</code> can take a boolean array as input</li></ul><h5 id="Boolean-choose"><a href="#Boolean-choose" class="headerlink" title="Boolean choose"></a>Boolean choose</h5><ul><li><code>df[df[&#39;column&#39;] &gt; 0]</code> returns rows where the value in ‘column’ is greater than 0</li><li><code>df[df[&#39;column&#39;].isin([1, 2, 3])]</code> returns rows where the value in ‘column’ is in the list <code>[1, 2, 3]</code></li><li><code>df[df[&#39;column&#39;].str.contains(&#39;pattern&#39;)]</code> returns rows where the value in ‘column’ contains the substring ‘pattern’</li></ul><h4 id="operations-on-DataFrame"><a href="#operations-on-DataFrame" class="headerlink" title="operations on DataFrame"></a>operations on DataFrame</h4><h5 id="add-modify-columns"><a href="#add-modify-columns" class="headerlink" title="add&#x2F;modify columns"></a>add&#x2F;modify columns</h5><ul><li>using <code>[]</code> to add a new column: <code>df[&#39;new_column&#39;] = [1, 2, 3]</code></li></ul><h5 id="rename-columns"><a href="#rename-columns" class="headerlink" title="rename columns"></a>rename columns</h5><ul><li>using <code>rename</code>: <code>df.rename(columns=&#123;&#39;old_name&#39;: &#39;new_name&#39;&#125;, inplace=True)</code></li></ul><h5 id="delete-columns"><a href="#delete-columns" class="headerlink" title="delete columns"></a>delete columns</h5><ul><li>using <code>drop</code>: <code>df.drop(columns=[&#39;column_to_delete&#39;], inplace=True)</code><ul><li>By default, <code>drop</code> does not modify the DataFrame in place, so you need to set <code>inplace=True</code> to apply the changes directly to the original DataFrame, or just assign the result to a new variable.</li></ul></li></ul><h4 id="useful-methods"><a href="#useful-methods" class="headerlink" title="useful methods"></a>useful methods</h4><ul><li>suport a range of methods from <code>numpy</code>, as long as the type is int.</li><li><code>size/shape</code></li><li><code>describe</code>: return a description of DataFrame</li><li><code>sample</code>: randomly select rows, replace can be set</li><li><code>value_counts</code>: return counts of unique values</li><li><code>sort_values</code>: sort by column values</li><li><code>unique</code>: return unique values</li></ul><h4 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h4><h5 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h5><p>Group data by one or more columns and perform aggregate operations on the grouped data.</p><h5 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h5><p>groupby generates a GroupBy object</p><p>we can’t work with GroupBy object directly, we need to apply an aggregation function(to reduce the dimension of table)(a function that aggregates several values into one summary value) to it.<br><code>grouped = df.groupby(&#39;column_name&#39;).agg(&#123;&#39;other_column&#39;: &#39;sum&#39;&#125;)</code></p><p>the column we grouped on will become the index</p><h6 id="Filtering-by-Group"><a href="#Filtering-by-Group" class="headerlink" title="Filtering by Group"></a><strong>Filtering by Group</strong></h6><p>it takes a function that returns true or false for each sub-DataFrame, where <code>True</code> means the group should be kept.</p><h6 id="look-into-DataFrame-groupby-ways"><a href="#look-into-DataFrame-groupby-ways" class="headerlink" title="look into DataFrame.groupby ways"></a><strong>look into DataFrame.groupby ways</strong></h6><p><code>grouped.groups()</code><br><code>grouped.get_group(&#39;group_name&#39;)</code></p><h6 id="Grouping-by-Multiple-Columns"><a href="#Grouping-by-Multiple-Columns" class="headerlink" title="Grouping by Multiple Columns"></a><strong>Grouping by Multiple Columns</strong></h6><ol><li>using a list of column names: <code>df.groupby([&#39;col1&#39;, &#39;col2&#39;])</code></li><li>using Pivot Table</li></ol><ul><li><code>index</code>: the column(s) to group by</li><li><code>columns</code>: the column(s) to pivot</li><li><code>values</code>: the column(s) to aggregate</li><li><code>aggfunc</code>: the aggregation function to apply</li></ul><h4 id="Joining-DataFrames"><a href="#Joining-DataFrames" class="headerlink" title="Joining DataFrames"></a>Joining DataFrames</h4>]]></content>
      
      
      <categories>
          
          <category> CS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> data_science </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/07/25/hello-world/"/>
      <url>/2025/07/25/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
